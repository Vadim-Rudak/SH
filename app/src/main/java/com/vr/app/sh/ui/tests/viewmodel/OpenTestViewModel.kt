package com.vr.app.sh.ui.tests.viewmodel

import androidx.lifecycle.LiveData
import androidx.lifecycle.ViewModel
import com.vr.app.sh.data.model.Question
import com.vr.app.sh.data.model.ResultTest
import com.vr.app.sh.domain.UseCase.GetListQuestionsBD

class OpenTestViewModel(private val getListQuestionsBD: GetListQuestionsBD): ViewModel() {

    var listQuestions: LiveData<List<Question>> = getListQuestionsBD.execute()
    lateinit var arrayAnswers:Array<Int>
    var resultTest = ResultTest()

    fun setInfoQuestions(list:List<Question>){
        arrayAnswers = Array(list.size){3}
        resultTest.test_id = list[0].test_id
    }

    fun getTestResult():ResultTest{
        for (i in arrayAnswers.size-1 downTo 0){
            when(arrayAnswers[i]){
                1->resultTest.num_correct_answer++
                2->resultTest.num_wrong_answer++
                3->resultTest.num_not_answer++
            }
        }
        resultTest.all_result = resultTest.num_correct_answer*100/arrayAnswers.size
        return resultTest
    }

}